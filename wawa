#!name=综合
#!desc=自用综合Loon模块
#!openUrl=https://raw.githubusercontent.com/wutianyu1129/Quantumult-X/main/wawa
#!author=吴天宇
#!homepage=https://raw.githubusercontent.com/wutianyu1129/Quantumult-X/main/wawa
#!icon=
#!select = 
#!input = 
#!raw-url=https://raw.githubusercontent.com/wutianyu1129/Quantumult-X/main/wawa
#!update：2024.1.1

[Rule]

# bilibili精简并阻止缓存
DOMAIN-SUFFIX,upos-sz-staticcos.bilivideo.com,reject
DOMAIN-SUFFIX,appdl-1-drcn.dbankcdn.com,reject
DOMAIN-SUFFIX,biligame.com,reject
DOMAIN-SUFFIX,biligame.net,reject
DOMAIN-SUFFIX,krxd.net,reject
DOMAIN-SUFFIX,dl.hdslb.com,reject

# 小红书精简并阻止缓存
#DOMAIN-SUFFIX,fe-static.xhscdn.com,reject

# 朵朵校友圈去广告
DOMAIN-SUFFIX, ad.duoduo.link, reject

# 向日葵去广告
DOMAIN-SUFFIX, dm.toutiao.com, reject
DOMAIN-SUFFIX, ddns.oray.com, reject
DOMAIN-SUFFIX, sl-tk.oray.com, reject
DOMAIN-SUFFIX, client-api.oray.com, reject
DOMAIN-SUFFIX, push.oray.com, reject
DOMAIN-SUFFIX, offline-adv.oray.com, reject
DOMAIN-KEYWORD, upload-cdn.orayimg.com, reject
DOMAIN-KEYWORD, upload-cdn.orayimg.com-upload-activity, reject

# YouTube Web去广告
AND,((DOMAIN-SUFFIX,googlevideo.com), (PROTOCOL,UDP)),REJECT-NO-DROP
DOMAIN-SUFFIX, static.doubleclick.net, reject
DOMAIN-SUFFIX, jnn-pa.googleapis.com, reject
DOMAIN-SUFFIX, safebrowsing.googleapis-cn.com, reject
DOMAIN-SUFFIX, doubleclick.net, reject
DOMAIN-KEYWORD, sentry.io, reject
DOMAIN-KEYWORD, get_midroll_, reject
DOMAIN-KEYWORD, pagead, reject
DOMAIN-KEYWORD, googleads, reject


[URL Rewrite]

# bilibili精简并阻止缓存
(?=resource\?resourceUrl|upos\-sz\-staticcos) url reject
(?=.*(hdslb\.com.*(\.zip|\.mp4)))^((?!(hdslb\.com\/bfs\/app-static\/)).)*$ url reject

# 小红书精简并阻止缓存
(?=xhscdn.*\.(otf|OTF|ttf|TTF|zip)) url reject


[Script]

# 跳过中间界面，支付宝链接、被封禁链接进行通知弹窗跳转，在微信中用快照显示被封禁的链接（可选），在微信中进行强制重定向（可选），群聊 / 扫码均可使用，可选项可在脚本 2、3 行更改，也可在 BoxJs 中更改
# Author：zZPiglet，原重写地址：https://raw.githubusercontent.com/zZPiglet/Task/master/UnblockURLinWeChat.conf
# 修正地址：https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/Function/UnblockURLinWeChat.conf
http-response ^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\? script-path=https://raw.githubusercontent.com/ddgksf2013/Scripts/master/weixin110.js, requires-body=true, timeout=60, tag=weixin110

# 微信去广告[不包含公众号信息流AD、朋友圈AD][推荐开启青少年模式可去除朋友圈AD]
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url response-body advertisement response-body ddgksf2013

[MITM]
hostname = *.hdslb.com, *.bilivideo.com, manga.bilibili.com, api.live.bilibili.com, api.vc.bilibili.com, app.bilibili.com, app.biliapi.net, api.bilibili.com, api.biliapi.net, grpc.biliapi.net, *.xhscdn.com, weixin110.qq.com, security.wechat.com, mp.weixin.qq.com
